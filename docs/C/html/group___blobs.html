<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Blobs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">Blobs</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A raw SHA-1 digest used as the unique identifier of a blob.  <a href="struct_c4_blob_key.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Blob Keys</h2></td></tr>
<tr class="memitem:ga1f93de2ae8a31d160f02db45bc412b58"><td class="memItemLeft" align="right" valign="top">typedef struct c4BlobStore&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a></td></tr>
<tr class="memdesc:ga1f93de2ae8a31d160f02db45bc412b58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque handle for an object that manages storage of blobs.  <a href="#ga1f93de2ae8a31d160f02db45bc412b58">More...</a><br /></td></tr>
<tr class="separator:ga1f93de2ae8a31d160f02db45bc412b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d36074d48a6da3bf9c5bdf70df5af82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga5d36074d48a6da3bf9c5bdf70df5af82">c4blob_keyFromString</a> (<a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a> str, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga5d36074d48a6da3bf9c5bdf70df5af82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a string of the form "sha1-"+base64 into a raw key.  <a href="#ga5d36074d48a6da3bf9c5bdf70df5af82">More...</a><br /></td></tr>
<tr class="separator:ga5d36074d48a6da3bf9c5bdf70df5af82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b8b16028de4b2c71c4c351734e93479"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga1b8b16028de4b2c71c4c351734e93479">c4blob_keyToString</a> (<a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga1b8b16028de4b2c71c4c351734e93479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a blob key to a string of the form "sha1-"+base64.  <a href="#ga1b8b16028de4b2c71c4c351734e93479">More...</a><br /></td></tr>
<tr class="separator:ga1b8b16028de4b2c71c4c351734e93479"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Blob Store API</h2></td></tr>
<tr class="memitem:gaa7497757c491777efb234c344e35de58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#gaa7497757c491777efb234c344e35de58">c4db_getBlobStore</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db <a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaa7497757c491777efb234c344e35de58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the BlobStore associated with a bundled database.  <a href="#gaa7497757c491777efb234c344e35de58">More...</a><br /></td></tr>
<tr class="separator:gaa7497757c491777efb234c344e35de58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1044656098f2504f6c7bfb133b93a62f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga1044656098f2504f6c7bfb133b93a62f">c4blob_openStore</a> (<a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a> dirPath, C4DatabaseFlags flags, const <a class="el" href="struct_c4_encryption_key.html">C4EncryptionKey</a> *encryptionKey, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga1044656098f2504f6c7bfb133b93a62f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a BlobStore in a directory.  <a href="#ga1044656098f2504f6c7bfb133b93a62f">More...</a><br /></td></tr>
<tr class="separator:ga1044656098f2504f6c7bfb133b93a62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39acb7777a01fbfaa998d4611140b1e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga39acb7777a01fbfaa998d4611140b1e1">c4blob_freeStore</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga39acb7777a01fbfaa998d4611140b1e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes/frees a BlobStore.  <a href="#ga39acb7777a01fbfaa998d4611140b1e1">More...</a><br /></td></tr>
<tr class="separator:ga39acb7777a01fbfaa998d4611140b1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f1bdb8d42850e4f8df4982c09f3f7a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga2f1bdb8d42850e4f8df4982c09f3f7a9">c4blob_deleteStore</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga2f1bdb8d42850e4f8df4982c09f3f7a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the BlobStore's blobs and directory, and (if successful) frees the object.  <a href="#ga2f1bdb8d42850e4f8df4982c09f3f7a9">More...</a><br /></td></tr>
<tr class="separator:ga2f1bdb8d42850e4f8df4982c09f3f7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Blob API</h2></td></tr>
<tr class="memitem:ga18a674b2c4e0085e03332563c19c5394"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga18a674b2c4e0085e03332563c19c5394">c4blob_getSize</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga18a674b2c4e0085e03332563c19c5394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the content size of a blob given its key.  <a href="#ga18a674b2c4e0085e03332563c19c5394">More...</a><br /></td></tr>
<tr class="separator:ga18a674b2c4e0085e03332563c19c5394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31b11d99b8cecd4a166317793da5c6f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga31b11d99b8cecd4a166317793da5c6f6">c4blob_getContents</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga31b11d99b8cecd4a166317793da5c6f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the entire contents of a blob into memory.  <a href="#ga31b11d99b8cecd4a166317793da5c6f6">More...</a><br /></td></tr>
<tr class="separator:ga31b11d99b8cecd4a166317793da5c6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f6f6bfb8e25d7699f993bbd273c9598"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga5f6f6bfb8e25d7699f993bbd273c9598">c4blob_getFilePath</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga5f6f6bfb8e25d7699f993bbd273c9598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the path of the file that stores the blob, if possible.  <a href="#ga5f6f6bfb8e25d7699f993bbd273c9598">More...</a><br /></td></tr>
<tr class="separator:ga5f6f6bfb8e25d7699f993bbd273c9598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82e6ec02e29d690585e6dabd6efd0db4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga82e6ec02e29d690585e6dabd6efd0db4">c4blob_computeKey</a> (<a class="el" href="struct_c4_slice.html">C4Slice</a> contents)</td></tr>
<tr class="memdesc:ga82e6ec02e29d690585e6dabd6efd0db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derives the key of the given data, without storing it.  <a href="#ga82e6ec02e29d690585e6dabd6efd0db4">More...</a><br /></td></tr>
<tr class="separator:ga82e6ec02e29d690585e6dabd6efd0db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dfe6d2d509e35a847bc94103eef9636"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga7dfe6d2d509e35a847bc94103eef9636">c4blob_create</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *store <a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_slice.html">C4Slice</a> contents, const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *expectedKey, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *outKey, <a class="el" href="struct_c4_error.html">C4Error</a> *error) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga7dfe6d2d509e35a847bc94103eef9636"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a blob.  <a href="#ga7dfe6d2d509e35a847bc94103eef9636">More...</a><br /></td></tr>
<tr class="separator:ga7dfe6d2d509e35a847bc94103eef9636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cbf6b83e6f2772e2621a7eba42e8775"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga2cbf6b83e6f2772e2621a7eba42e8775">c4blob_delete</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga2cbf6b83e6f2772e2621a7eba42e8775"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a blob from the store given its key.  <a href="#ga2cbf6b83e6f2772e2621a7eba42e8775">More...</a><br /></td></tr>
<tr class="separator:ga2cbf6b83e6f2772e2621a7eba42e8775"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Streamed Reads</h2></td></tr>
<tr class="memitem:gafc17929a5c2540de640863fd5f202281"><td class="memItemLeft" align="right" valign="top">typedef struct c4ReadStream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a></td></tr>
<tr class="memdesc:gafc17929a5c2540de640863fd5f202281"><td class="mdescLeft">&#160;</td><td class="mdescRight">An open stream for reading data from a blob.  <a href="#gafc17929a5c2540de640863fd5f202281">More...</a><br /></td></tr>
<tr class="separator:gafc17929a5c2540de640863fd5f202281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3b6228ed288f61088593e09789a3277"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#gaa3b6228ed288f61088593e09789a3277">c4blob_openReadStream</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaa3b6228ed288f61088593e09789a3277"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a blob for reading, as a random-access byte stream.  <a href="#gaa3b6228ed288f61088593e09789a3277">More...</a><br /></td></tr>
<tr class="separator:gaa3b6228ed288f61088593e09789a3277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga940d884956d2ceabdb7085b51bb1c31c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga940d884956d2ceabdb7085b51bb1c31c">c4stream_read</a> (<a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *stream <a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, void *buffer, size_t maxBytesToRead, <a class="el" href="struct_c4_error.html">C4Error</a> *error) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga940d884956d2ceabdb7085b51bb1c31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an open stream.  <a href="#ga940d884956d2ceabdb7085b51bb1c31c">More...</a><br /></td></tr>
<tr class="separator:ga940d884956d2ceabdb7085b51bb1c31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41afc028c0e0b77e8a6993a8f784d42a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga41afc028c0e0b77e8a6993a8f784d42a">c4stream_getLength</a> (<a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga41afc028c0e0b77e8a6993a8f784d42a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the exact length in bytes of the stream.  <a href="#ga41afc028c0e0b77e8a6993a8f784d42a">More...</a><br /></td></tr>
<tr class="separator:ga41afc028c0e0b77e8a6993a8f784d42a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6335518fa1d80ea427ecd81c5f80bf21"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga6335518fa1d80ea427ecd81c5f80bf21">c4stream_seek</a> (<a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, uint64_t position, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga6335518fa1d80ea427ecd81c5f80bf21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves to a random location in the stream; the next c4stream_read call will read from that location.  <a href="#ga6335518fa1d80ea427ecd81c5f80bf21">More...</a><br /></td></tr>
<tr class="separator:ga6335518fa1d80ea427ecd81c5f80bf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30790a3c54b7132f1ac312346cc1e5ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga30790a3c54b7132f1ac312346cc1e5ea">c4stream_close</a> (<a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga30790a3c54b7132f1ac312346cc1e5ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a read-stream.  <a href="#ga30790a3c54b7132f1ac312346cc1e5ea">More...</a><br /></td></tr>
<tr class="separator:ga30790a3c54b7132f1ac312346cc1e5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Streamed Writes</h2></td></tr>
<tr class="memitem:ga7063759634332538b33b50c169473715"><td class="memItemLeft" align="right" valign="top">typedef struct c4WriteStream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a></td></tr>
<tr class="memdesc:ga7063759634332538b33b50c169473715"><td class="mdescLeft">&#160;</td><td class="mdescRight">An open stream for writing data to a blob.  <a href="#ga7063759634332538b33b50c169473715">More...</a><br /></td></tr>
<tr class="separator:ga7063759634332538b33b50c169473715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9807c267532c2f9d42f5964d0eadb5c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga9807c267532c2f9d42f5964d0eadb5c7">c4blob_openWriteStream</a> (<a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga9807c267532c2f9d42f5964d0eadb5c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a write stream for creating a new blob.  <a href="#ga9807c267532c2f9d42f5964d0eadb5c7">More...</a><br /></td></tr>
<tr class="separator:ga9807c267532c2f9d42f5964d0eadb5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bdd0f2f5c827136a0f1968375f6ae04"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga9bdd0f2f5c827136a0f1968375f6ae04">c4stream_write</a> (<a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *, const void *bytes, size_t length, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga9bdd0f2f5c827136a0f1968375f6ae04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to a stream.  <a href="#ga9bdd0f2f5c827136a0f1968375f6ae04">More...</a><br /></td></tr>
<tr class="separator:ga9bdd0f2f5c827136a0f1968375f6ae04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga227fdc8eb6926de3c4ec49b83b7ddf64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga227fdc8eb6926de3c4ec49b83b7ddf64">c4stream_computeBlobKey</a> (<a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga227fdc8eb6926de3c4ec49b83b7ddf64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the blob-key (digest) of the data written to the stream.  <a href="#ga227fdc8eb6926de3c4ec49b83b7ddf64">More...</a><br /></td></tr>
<tr class="separator:ga227fdc8eb6926de3c4ec49b83b7ddf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68452807f02a1633dd0e33800a7b0670"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga68452807f02a1633dd0e33800a7b0670">c4stream_install</a> (<a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *<a class="el" href="c4_base_8h.html#a8944e5062c19897c26a00074e7c4550b">C4NONNULL</a>, const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *expectedKey, <a class="el" href="struct_c4_error.html">C4Error</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga68452807f02a1633dd0e33800a7b0670"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the data written to the stream as a finished blob to the store.  <a href="#ga68452807f02a1633dd0e33800a7b0670">More...</a><br /></td></tr>
<tr class="separator:ga68452807f02a1633dd0e33800a7b0670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bfe789d86778b97b197a30af19b315d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blobs.html#ga3bfe789d86778b97b197a30af19b315d">c4stream_closeWriter</a> (<a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga3bfe789d86778b97b197a30af19b315d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a blob write-stream.  <a href="#ga3bfe789d86778b97b197a30af19b315d">More...</a><br /></td></tr>
<tr class="separator:ga3bfe789d86778b97b197a30af19b315d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga1f93de2ae8a31d160f02db45bc412b58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f93de2ae8a31d160f02db45bc412b58">&sect;&nbsp;</a></span>C4BlobStore</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct c4BlobStore <a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque handle for an object that manages storage of blobs. </p>

</div>
</div>
<a id="gafc17929a5c2540de640863fd5f202281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc17929a5c2540de640863fd5f202281">&sect;&nbsp;</a></span>C4ReadStream</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct c4ReadStream <a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An open stream for reading data from a blob. </p>

</div>
</div>
<a id="ga7063759634332538b33b50c169473715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7063759634332538b33b50c169473715">&sect;&nbsp;</a></span>C4WriteStream</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct c4WriteStream <a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An open stream for writing data to a blob. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga82e6ec02e29d690585e6dabd6efd0db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82e6ec02e29d690585e6dabd6efd0db4">&sect;&nbsp;</a></span>c4blob_computeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> c4blob_computeKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>contents</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Derives the key of the given data, without storing it. </p>

</div>
</div>
<a id="ga7dfe6d2d509e35a847bc94103eef9636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7dfe6d2d509e35a847bc94103eef9636">&sect;&nbsp;</a></span>c4blob_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4blob_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *store&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>contents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *&#160;</td>
          <td class="paramname"><em>expectedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *&#160;</td>
          <td class="paramname"><em>outKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a blob. </p>
<p>The associated key will be written to <code>outKey</code>. If <code>expectedKey</code> is not NULL, then the operation will fail unless the contents actually have that key. </p>

</div>
</div>
<a id="ga2cbf6b83e6f2772e2621a7eba42e8775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cbf6b83e6f2772e2621a7eba42e8775">&sect;&nbsp;</a></span>c4blob_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4blob_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a blob from the store given its key. </p>

</div>
</div>
<a id="ga2f1bdb8d42850e4f8df4982c09f3f7a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f1bdb8d42850e4f8df4982c09f3f7a9">&sect;&nbsp;</a></span>c4blob_deleteStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4blob_deleteStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the BlobStore's blobs and directory, and (if successful) frees the object. </p>

</div>
</div>
<a id="ga39acb7777a01fbfaa998d4611140b1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39acb7777a01fbfaa998d4611140b1e1">&sect;&nbsp;</a></span>c4blob_freeStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4blob_freeStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes/frees a BlobStore. </p>
<p>(A NULL parameter is allowed.) </p>

</div>
</div>
<a id="ga31b11d99b8cecd4a166317793da5c6f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31b11d99b8cecd4a166317793da5c6f6">&sect;&nbsp;</a></span>c4blob_getContents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4blob_getContents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the entire contents of a blob into memory. </p>
<p>Caller is responsible for freeing it. </p>

</div>
</div>
<a id="ga5f6f6bfb8e25d7699f993bbd273c9598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f6f6bfb8e25d7699f993bbd273c9598">&sect;&nbsp;</a></span>c4blob_getFilePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4blob_getFilePath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the path of the file that stores the blob, if possible. </p>
<p>This call may fail with error kC4ErrorWrongFormat if the blob is encrypted (in which case the file would be unreadable by the caller) or with kC4ErrorUnsupported if for some implementation reason the blob isn't stored as a standalone file. Thus, the caller MUST use this function only as an optimization, and fall back to reading the contents via the API if it fails. Also, it goes without saying that the caller MUST not modify the file! </p>

</div>
</div>
<a id="ga18a674b2c4e0085e03332563c19c5394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18a674b2c4e0085e03332563c19c5394">&sect;&nbsp;</a></span>c4blob_getSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t c4blob_getSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the content size of a blob given its key. </p>
<p>Returns -1 if it doesn't exist. WARNING: If the blob is encrypted, the return value is a conservative estimate that may be up to 16 bytes larger than the actual size. </p>

</div>
</div>
<a id="ga5d36074d48a6da3bf9c5bdf70df5af82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d36074d48a6da3bf9c5bdf70df5af82">&sect;&nbsp;</a></span>c4blob_keyFromString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4blob_keyFromString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes a string of the form "sha1-"+base64 into a raw key. </p>

</div>
</div>
<a id="ga1b8b16028de4b2c71c4c351734e93479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b8b16028de4b2c71c4c351734e93479">&sect;&nbsp;</a></span>c4blob_keyToString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4blob_keyToString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes a blob key to a string of the form "sha1-"+base64. </p>

</div>
</div>
<a id="gaa3b6228ed288f61088593e09789a3277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3b6228ed288f61088593e09789a3277">&sect;&nbsp;</a></span>c4blob_openReadStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a>* c4blob_openReadStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a blob for reading, as a random-access byte stream. </p>

</div>
</div>
<a id="ga1044656098f2504f6c7bfb133b93a62f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1044656098f2504f6c7bfb133b93a62f">&sect;&nbsp;</a></span>c4blob_openStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a>* c4blob_openStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>dirPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">C4DatabaseFlags&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_encryption_key.html">C4EncryptionKey</a> *&#160;</td>
          <td class="paramname"><em>encryptionKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a BlobStore in a directory. </p>
<p>If the flags allow creating, the directory will be created if necessary. Call <a class="el" href="group___blobs.html#ga39acb7777a01fbfaa998d4611140b1e1" title="Closes/frees a BlobStore. ">c4blob_freeStore()</a> when finished using the BlobStore. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dirPath</td><td>The filesystem path of the directory holding the attachments. </td></tr>
    <tr><td class="paramname">flags</td><td>Specifies options like create, read-only </td></tr>
    <tr><td class="paramname">encryptionKey</td><td>Optional encryption algorithm &amp; key </td></tr>
    <tr><td class="paramname">outError</td><td>Error is returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The BlobStore reference, or NULL on error </dd></dl>

</div>
</div>
<a id="ga9807c267532c2f9d42f5964d0eadb5c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9807c267532c2f9d42f5964d0eadb5c7">&sect;&nbsp;</a></span>c4blob_openWriteStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a>* c4blob_openWriteStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a write stream for creating a new blob. </p>
<p>You should then call c4stream_write to write the data, ending with c4stream_install to compute the blob's key and add it to the store, and then c4stream_closeWriter. </p>

</div>
</div>
<a id="gaa7497757c491777efb234c344e35de58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7497757c491777efb234c344e35de58">&sect;&nbsp;</a></span>c4db_getBlobStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___blobs.html#ga1f93de2ae8a31d160f02db45bc412b58">C4BlobStore</a>* c4db_getBlobStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the BlobStore associated with a bundled database. </p>
<p>Fails if the database is not bundled. DO NOT call c4blob_freeStore on this! The C4Database will free it when it closes. </p>

</div>
</div>
<a id="ga30790a3c54b7132f1ac312346cc1e5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30790a3c54b7132f1ac312346cc1e5ea">&sect;&nbsp;</a></span>c4stream_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4stream_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a read-stream. </p>
<p>(A NULL parameter is allowed.) </p>

</div>
</div>
<a id="ga3bfe789d86778b97b197a30af19b315d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bfe789d86778b97b197a30af19b315d">&sect;&nbsp;</a></span>c4stream_closeWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4stream_closeWriter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a blob write-stream. </p>
<p>If c4stream_install was not already called (or was called but failed), the temporary file will be deleted without adding the blob to the store. (A NULL parameter is allowed, and is a no-op.) </p>

</div>
</div>
<a id="ga227fdc8eb6926de3c4ec49b83b7ddf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga227fdc8eb6926de3c4ec49b83b7ddf64">&sect;&nbsp;</a></span>c4stream_computeBlobKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> c4stream_computeBlobKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the blob-key (digest) of the data written to the stream. </p>
<p>This should only be called after writing the entire data. No more data can be written after this call. </p>

</div>
</div>
<a id="ga41afc028c0e0b77e8a6993a8f784d42a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41afc028c0e0b77e8a6993a8f784d42a">&sect;&nbsp;</a></span>c4stream_getLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t c4stream_getLength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the exact length in bytes of the stream. </p>

</div>
</div>
<a id="ga68452807f02a1633dd0e33800a7b0670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga68452807f02a1633dd0e33800a7b0670">&sect;&nbsp;</a></span>c4stream_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4stream_install </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *&#160;</td>
          <td class="paramname"><em>expectedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the data written to the stream as a finished blob to the store. </p>
<p>If <code>expectedKey</code> is not NULL, then the operation will fail unless the contents actually have that key. (If you don't know ahead of time what the key should be, call c4stream_computeBlobKey beforehand to derive it, and pass NULL for expectedKey.) This function does not close the writer. </p>

</div>
</div>
<a id="ga940d884956d2ceabdb7085b51bb1c31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga940d884956d2ceabdb7085b51bb1c31c">&sect;&nbsp;</a></span>c4stream_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t c4stream_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *stream&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxBytesToRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an open stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The open stream to read from </td></tr>
    <tr><td class="paramname">buffer</td><td>Where to copy the read data to </td></tr>
    <tr><td class="paramname">maxBytesToRead</td><td>The maximum number of bytes to read to the buffer </td></tr>
    <tr><td class="paramname">error</td><td>Error is returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The actual number of bytes read, or 0 if an error occurred </dd></dl>

</div>
</div>
<a id="ga6335518fa1d80ea427ecd81c5f80bf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6335518fa1d80ea427ecd81c5f80bf21">&sect;&nbsp;</a></span>c4stream_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4stream_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#gafc17929a5c2540de640863fd5f202281">C4ReadStream</a> *&#160;</td>
          <td class="paramname"><em>C4NONNULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves to a random location in the stream; the next c4stream_read call will read from that location. </p>

</div>
</div>
<a id="ga9bdd0f2f5c827136a0f1968375f6ae04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9bdd0f2f5c827136a0f1968375f6ae04">&sect;&nbsp;</a></span>c4stream_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4stream_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___blobs.html#ga7063759634332538b33b50c169473715">C4WriteStream</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to a stream. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
